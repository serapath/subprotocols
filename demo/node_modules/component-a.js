const bel = require('bel')
const csjs = require('csjs-inject')

const componentB = require('component-b')

module.exports = componentA

function componentA (protocol, opts) {

  const text = protocol('text')(onText)
  const _class = protocol('.componentB')(onClass)

  var span, b
  const element = bel`<div>
    <h1> component A </h1>
    ${span = bel`<span></span>`}
    <button onclick=${setRandomText}>set</button>
    ${b = componentB(protocol.sub('b', customizeB))}
  </div>`

  text('foobar')
  _class(css.componentB)
  return element
  function onText ({ body: val }) { span.textContent = val }
  function onClass ({ body: val }) { element.setAttribute('class', val) }
  function setRandomText (event) {
    text(`some random text A${`${Math.random()}`.slice(2)}`)
  }
  function customizeB () {
    console.error('@TODO: customizeB')
    // ...
  }
}
const css = csjs`
.componentA {
  border: 3px dashed green;
}`